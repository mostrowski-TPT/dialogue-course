define([
    "core/js/adapt",
    "core/js/views/componentView"
], function (Adapt, ComponentView) {

    var ComponentName = ComponentView.extend({

        preRender: function () {
            console.log("preRender");
            //here is a good place to add any code you want to run prior to the component being rendered
        },

        postRender: function () {
            console.log("postRender");

            //fades out all items generated by hbs template
            var $contentItems = this.$('.current-dialogue');
            $contentItems.hide();

            //fades in first item from hbs template eq jquery function getting by DOM index     
            var $contentItem = $contentItems.eq(0);
            $contentItem.fadeIn();

            // Use this to set the model status to ready.
            // It should be used when telling Adapt that this view is completely loaded.
            // This is sometimes used in conjunction with imageReady.
            this.setReadyStatus();

            // Use this to set the model status to complete.
            // This can be used with inview or when the model is set to complete/the question has been answered.
        },

        events: {
            'click .optionbutton': 'onOptionbuttonClicked'
        },

        onOptionbuttonClicked: function (event) {
            var linkword = $(event.currentTarget).attr("optionlink");
            var finisher = $(event.currentTarget).attr("finisher");
            console.log("zmienna finiszer "+finisher);
            console.log("czy jest true " + (finisher == "true"));
            //console.log(linkword);
            this.showContentItemAtIndex(linkword);

            (finisher == "true")? this.setCompletionStatus() : console.log("niedizlaaj");
               //console.log("DZIALAJ");
                //this.setCompletionStatus();
            
        },

        showContentItemAtIndex: function (linkword, skipFocus) {
            var $contentItems = this.$('.current-dialogue');

            $contentItems.hide();

            //var $contentItem = $("[dialogueID="+linkword+"]");
            var $contentItem = $("." + linkword);

            console.log($contentItem);
            $contentItem.fadeIn();
        }
    }, {
        template: "dialogue"
    });

    return Adapt.register("dialogue", ComponentName);
});
